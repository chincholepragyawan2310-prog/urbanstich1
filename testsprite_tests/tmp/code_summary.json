{
  "tech_stack": [
    "JavaScript",
    "Node.js",
    "Express",
    "HTML",
    "CSS",
    "Tailwind CSS",
    "Razorpay",
    "In-memory storage"
  ],
  "features": [
    {
      "name": "Get Products",
      "description": "Retrieve all products or filter by category (t-shirts, shirts, jeans, jackets)",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Get Products API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/products": {
            "get": {
              "summary": "Get all products or filter by category",
              "parameters": [
                {
                  "name": "category",
                  "in": "query",
                  "schema": {
                    "type": "string",
                    "enum": ["t-shirts", "shirts", "jeans", "jackets"]
                  },
                  "required": false,
                  "description": "Filter products by category"
                }
              ],
              "responses": {
                "200": {
                  "description": "List of products",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "products": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "id": {"type": "string"},
                                "title": {"type": "string"},
                                "price": {"type": "number"},
                                "image": {"type": "string"},
                                "category": {"type": "string"}
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "User Registration",
      "description": "Register a new user account with name, email, and password",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/auth.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "User Registration API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/auth/register": {
            "post": {
              "summary": "Register a new user",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["name", "email", "password"],
                      "properties": {
                        "name": {"type": "string"},
                        "email": {"type": "string", "format": "email"},
                        "password": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Registration successful",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "token": {"type": "string"},
                          "user": {
                            "type": "object",
                            "properties": {
                              "id": {"type": "string"},
                              "name": {"type": "string"},
                              "email": {"type": "string"}
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Bad request - missing fields or email already registered"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "User Login",
      "description": "Authenticate user with email and password",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/auth.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "User Login API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/auth/login": {
            "post": {
              "summary": "Login user",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["email", "password"],
                      "properties": {
                        "email": {"type": "string", "format": "email"},
                        "password": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Login successful",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "token": {"type": "string"},
                          "user": {
                            "type": "object",
                            "properties": {
                              "id": {"type": "string"},
                              "name": {"type": "string"},
                              "email": {"type": "string"}
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "401": {
                  "description": "Invalid credentials"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Get User Orders",
      "description": "Retrieve all orders for the authenticated user",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Get User Orders API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/orders": {
            "get": {
              "summary": "Get user orders",
              "security": [
                {
                  "bearerAuth": []
                }
              ],
              "responses": {
                "200": {
                  "description": "List of user orders",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "orders": {
                            "type": "array",
                            "items": {
                              "type": "object"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "401": {
                  "description": "Unauthorized"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Create Order",
      "description": "Create a new order with cart items",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/cart.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Create Order API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/orders": {
            "post": {
              "summary": "Create a new order",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["items"],
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "productId": {"type": "string"},
                              "quantity": {"type": "number"},
                              "size": {"type": "string"}
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Order created successfully",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "orderId": {"type": "string"},
                          "total": {"type": "number"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Bad request - empty cart or invalid products"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Create Razorpay Order",
      "description": "Create a Razorpay payment order for online payment",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/payment.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Create Razorpay Order API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/payment/create-razorpay-order": {
            "post": {
              "summary": "Create Razorpay payment order",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["orderId"],
                      "properties": {
                        "orderId": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Razorpay order created",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "key": {"type": "string"},
                          "amount": {"type": "number"},
                          "currency": {"type": "string"},
                          "razorpayOrderId": {"type": "string"},
                          "orderId": {"type": "string"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Bad request - order ID missing or order already processed"
                },
                "404": {
                  "description": "Order not found"
                },
                "500": {
                  "description": "Razorpay credentials not configured or creation failed"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Verify Payment",
      "description": "Verify Razorpay payment signature and update order status",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/payment.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Verify Payment API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/payment/verify": {
            "post": {
              "summary": "Verify Razorpay payment",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["orderId", "razorpay_order_id", "razorpay_payment_id", "razorpay_signature"],
                      "properties": {
                        "orderId": {"type": "string"},
                        "razorpay_order_id": {"type": "string"},
                        "razorpay_payment_id": {"type": "string"},
                        "razorpay_signature": {"type": "string"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Payment verified successfully",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": {"type": "boolean"},
                          "message": {"type": "string"},
                          "orderId": {"type": "string"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Bad request - missing data or invalid signature"
                },
                "404": {
                  "description": "Order not found"
                },
                "500": {
                  "description": "Razorpay secret not configured"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Confirm COD Order",
      "description": "Confirm a Cash on Delivery order",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/assets/js/payment.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Confirm COD Order API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/orders/{id}/cod-confirm": {
            "post": {
              "summary": "Confirm COD order",
              "parameters": [
                {
                  "name": "id",
                  "in": "path",
                  "required": true,
                  "schema": {
                    "type": "string"
                  },
                  "description": "Order ID"
                }
              ],
              "responses": {
                "200": {
                  "description": "COD order confirmed",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "success": {"type": "boolean"},
                          "message": {"type": "string"},
                          "orderId": {"type": "string"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Order already processed"
                },
                "404": {
                  "description": "Order not found"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Newsletter Subscription",
      "description": "Subscribe email to newsletter",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js",
        "urbanstich/frontend/index.html"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Newsletter Subscription API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/newsletter/subscribe": {
            "post": {
              "summary": "Subscribe to newsletter",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["email"],
                      "properties": {
                        "email": {"type": "string", "format": "email"}
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Subscription successful",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "ok": {"type": "boolean"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Email required"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "Legacy Checkout",
      "description": "Legacy checkout endpoint for backward compatibility",
      "files": [
        "urbanstich/backend/server.js",
        "urbanstich/frontend/assets/js/api.js"
      ],
      "api_doc": {
        "openapi": "3.0.0",
        "info": {
          "title": "Legacy Checkout API",
          "version": "1.0.0"
        },
        "paths": {
          "/api/checkout": {
            "post": {
              "summary": "Legacy checkout endpoint",
              "requestBody": {
                "required": true,
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "required": ["items"],
                      "properties": {
                        "items": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "responses": {
                "200": {
                  "description": "Checkout successful",
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "orderId": {"type": "string"},
                          "total": {"type": "number"}
                        }
                      }
                    }
                  }
                },
                "400": {
                  "description": "Empty cart"
                }
              }
            }
          }
        }
      }
    }
  ]
}
